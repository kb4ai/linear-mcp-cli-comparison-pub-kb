# Linear CLI Tools Comparison - YAML Schema Specification
# This file defines the schema for project YAML files in projects/

# ============================================================================
# TRACKING FIELDS (Required - always first)
# ============================================================================

tracking:
  last-update:
    type: date
    format: "YYYY-MM-DD"
    required: true
    description: "Date of last update to this YAML file"
    example: "2025-12-22"

  repo-url:
    type: url
    required: true
    description: "GitHub/GitLab repository URL"
    example: "https://github.com/schpet/linear-cli"

  repo-commit:
    type: string
    required: false
    description: "Git commit hash analyzed (for reproducibility)"
    example: "abc123def"

# ============================================================================
# BASIC INFO
# ============================================================================

basic:
  name:
    type: string
    required: true
    description: "Human-readable project name"
    example: "linear-cli"

  description:
    type: string
    required: true
    description: "Brief one-line description"
    example: "Git-aware Linear CLI for developers"

  language:
    type: string
    required: true
    description: "Primary programming language"
    enum: ["TypeScript", "JavaScript", "Python", "Rust", "Go", "Ruby", "Deno"]
    example: "TypeScript"

  languages:
    type: array
    required: false
    description: "All programming languages used"
    example: ["TypeScript", "Bash"]

  license:
    type: string
    required: false
    description: "License identifier (SPDX)"
    example: "MIT"

# ============================================================================
# REPUTATION & MAINTENANCE
# ============================================================================

reputation:
  stars:
    type: integer
    required: false
    description: "GitHub stars count"

  forks:
    type: integer
    required: false

  contributors:
    type: integer
    required: false

  open-issues:
    type: integer
    required: false

  last-commit:
    type: date
    format: "YYYY-MM-DD"
    required: false
    description: "Date of most recent commit"

  created:
    type: date
    format: "YYYY-MM-DD"
    required: false
    description: "Repository creation date"

  archived:
    type: boolean
    required: false
    default: false

  organization:
    type: string
    required: false
    description: "Parent organization if notable"
    example: "schpet"

# ============================================================================
# CATEGORY & CLASSIFICATION
# ============================================================================

category:
  type: string
  required: true
  description: "Primary tool category"
  enum:
    # Linear CLI Categories
    - cli-client          # Standard CLI for Linear operations
    - tui-client          # Terminal User Interface (interactive)
    - ai-agent-tool       # Designed for AI agent integration
    - importer-exporter   # Bulk import/export operations
    - git-workflow        # Focused on git/GitHub integration
    - cross-team          # Multi-team reporting and analysis
    # MCP & Proxy Categories (for broader research scope)
    - linear-mcp-server   # MCP servers exposing Linear functionality
    - mcp-cli-auth        # MCP CLI tools with HTTP auth support
    - proxy-bridge        # stdioâ†”HTTP bridges with auth support

secondary-categories:
  type: array
  required: false
  description: "Additional applicable categories"

# ============================================================================
# FEATURES (Linear CLI specific)
# ============================================================================

features:
  git-integration:
    type: boolean
    description: "Branch name parsing, auto-detection of issue from branch"

  github-pr-creation:
    type: boolean
    description: "Can create GitHub PRs with Linear issue details"

  branch-management:
    type: boolean
    description: "Create/switch branches based on issues"

  kanban-view:
    type: boolean
    description: "Terminal-based kanban board visualization"

  ai-integration:
    type: boolean
    description: "AI-assisted features (label management, issue creation)"

  ai-provider:
    type: string
    description: "Which AI provider if ai-integration is true"
    enum: ["Claude", "Gemini", "OpenAI", "Custom"]

  cross-team-queries:
    type: boolean
    description: "Query across multiple Linear teams"

  bulk-operations:
    type: boolean
    description: "Batch import/export of issues"

  issue-creation:
    type: boolean
    description: "Create new issues from CLI"

  issue-update:
    type: boolean
    description: "Update existing issues"

  issue-search:
    type: boolean
    description: "Search/filter issues"

  issue-view:
    type: boolean
    description: "View issue details"

  team-management:
    type: boolean
    description: "List/manage teams"

  project-management:
    type: boolean
    description: "List/manage projects"

  label-management:
    type: boolean
    description: "Create/manage labels"

  report-generation:
    type: boolean
    description: "Generate reports (markdown, JSON, etc.)"

  mcp-server:
    type: boolean
    description: "MCP (Model Context Protocol) server support"

  image-download:
    type: boolean
    description: "Download images/attachments from issues"

  output-formats:
    type: array
    description: "Supported output formats"
    example: ["json", "markdown", "table", "plain"]

  interactive-mode:
    type: boolean
    description: "Interactive prompts for issue selection"

# ============================================================================
# ADVANCED LINEAR FEATURES (Issue Fields & Relationships)
# These are the specific Linear API features that matter for workflows
# ============================================================================

advanced-features:
  # Issue field support (read/write)
  sub-issues:
    type: boolean
    description: "Can create/manage sub-issues (parent-child relationships)"
    priority: high

  estimates:
    type: boolean
    description: "Can set/read story point estimates"
    priority: high

  blocking-blocked-by:
    type: boolean
    description: "Can set/read blocking/blocked-by issue relationships"
    priority: high

  due-dates:
    type: boolean
    description: "Can set/read due dates on issues"
    priority: medium

  related-issues:
    type: boolean
    description: "Can link related issues together"
    priority: medium

  duplicate-marking:
    type: boolean
    description: "Can mark issues as duplicates"
    priority: low

  attachments:
    type: boolean
    description: "Can upload/download file attachments"
    priority: medium

  # GitHub integration fields
  github-commits-link:
    type: boolean
    description: "Can view/manage linked GitHub commits"
    priority: low

  github-prs-link:
    type: boolean
    description: "Can view/manage linked GitHub PRs"
    priority: low

  # Core issue fields (typically supported)
  labels:
    type: boolean
    description: "Can set/manage labels"

  status:
    type: boolean
    description: "Can change issue status"

  priority:
    type: boolean
    description: "Can set issue priority"

  assignee:
    type: boolean
    description: "Can assign issues to users"

  projects:
    type: boolean
    description: "Can assign issues to projects"

  cycles:
    type: boolean
    description: "Can assign issues to cycles/sprints"

  milestones:
    type: boolean
    description: "Can assign issues to milestones"

  comments:
    type: boolean
    description: "Can create/read comments"

# ============================================================================
# INSTALLATION METHODS
# ============================================================================

installation:
  npm:
    type: string
    description: "npm package name"
    example: "@schpet/linear-cli"

  pip:
    type: string
    description: "PyPI package name"
    example: "linearator"

  brew:
    type: string
    description: "Homebrew formula"
    example: "schpet/tap/linear"

  cargo:
    type: string
    description: "Cargo crate name"
    example: "lt"

  go-install:
    type: string
    description: "Go install path"
    example: "github.com/dorkitude/linctl@latest"

  deno:
    type: string
    description: "Deno/JSR package"
    example: "jsr:@schpet/linear-cli"

  aur:
    type: string
    description: "Arch User Repository package"
    example: "linear-cli"

  binary:
    type: boolean
    description: "Pre-built binaries available"

  docker:
    type: string
    description: "Docker image name"

# ============================================================================
# AUTHENTICATION
# ============================================================================

authentication:
  env-var:
    type: string
    description: "Environment variable name for API key"
    example: "LINEAR_API_KEY"

  config-file:
    type: boolean
    description: "Supports configuration file"

  keyring:
    type: boolean
    description: "System keyring integration"

  encrypted-file:
    type: boolean
    description: "Encrypted credential file support"

  setup-wizard:
    type: boolean
    description: "Interactive setup/configuration wizard"

# ============================================================================
# PLATFORM SUPPORT
# ============================================================================

platforms:
  linux:
    type: boolean
  macos:
    type: boolean
  windows:
    type: boolean

# ============================================================================
# DOCUMENTATION
# ============================================================================

documentation:
  readme:
    type: boolean
    description: "Has comprehensive README"

  examples:
    type: boolean
    description: "Usage examples provided"

  api-docs:
    type: boolean
    description: "API documentation"

  man-page:
    type: boolean
    description: "Man page available"

# ============================================================================
# NOTES
# ============================================================================

notes:
  type: array
  description: "General observations and notes"

commands:
  type: array
  description: "Key CLI commands available"
  example:
    - "linear issue list"
    - "linear issue start"
    - "linear issue pr"

# ============================================================================
# MCP & PROXY FIELDS (for MCP servers and proxy/bridge tools)
# ============================================================================

transports:
  description: "MCP transport protocols supported (for MCP tools)"
  stdio:
    type: boolean
    description: "Supports stdio transport"
  http:
    type: boolean
    description: "Supports HTTP transport"
  sse:
    type: boolean
    description: "Supports SSE (Server-Sent Events) transport"
  websocket:
    type: boolean
    description: "Supports WebSocket transport"

bridge-direction:
  type: string
  enum: [stdio-to-http, http-to-stdio, bidirectional]
  description: "Direction of protocol bridging (for proxy tools)"

mcptools-compatible:
  type: boolean
  description: "Can be used as a command with mcptools CLI"

# ============================================================================
# TOKEN EFFICIENCY (for agent use cases)
# ============================================================================

token-efficiency:
  description: "Token cost for LLM agent usage"
  connection-overhead:
    type: integer
    description: "Approximate tokens consumed on connection/initialization"
  tool-count:
    type: integer
    description: "Number of tools exposed (for MCP servers)"
  json-output:
    type: boolean
    description: "Provides machine-parseable JSON output"
  single-command-docs:
    type: boolean
    description: "Single command to get usage documentation"

agent-optimized:
  type: boolean
  description: "Designed/optimized for LLM agent usage"

# ============================================================================
# API COVERAGE (Linear GraphQL API coverage tracking)
# ============================================================================

api-coverage:
  description: "Linear GraphQL API coverage tracking with evidence"
  type: object
  required: false

  queries-supported:
    type: array
    description: "GraphQL queries this tool supports"
    example:
      - "issue"
      - "issues"
      - "issueSearch"
      - "team"
      - "teams"
      - "viewer"

  mutations-supported:
    type: array
    description: "GraphQL mutations this tool supports"
    example:
      - "issueCreate"
      - "issueUpdate"
      - "issueArchive"
      - "commentCreate"
      - "issueLabelCreate"

  operations-partial:
    type: array
    description: "Operations with limited parameter support"
    items:
      type: object
      properties:
        operation:
          type: string
        limitation:
          type: string
    example:
      - operation: "issueCreate"
        limitation: "No estimate or dueDate parameter support"
      - operation: "issueUpdate"
        limitation: "Cannot set parent/sub-issue relationship"

  operations-planned:
    type: array
    description: "Operations planned for future support"
    example:
      - "issueRelationCreate"

  # MCP-specific coverage (for MCP servers only)
  mcp-tools:
    type: array
    description: "MCP tool names exposed by this server"
    example:
      - "linear_search_issues"
      - "linear_create_issue"
      - "linear_update_issue"

  mcp-tool-coverage:
    type: array
    description: "Mapping of MCP tools to GraphQL operations"
    items:
      type: object
      properties:
        tool:
          type: string
          description: "MCP tool name"
        operations:
          type: array
          description: "GraphQL operations this tool uses"
    example:
      - tool: "linear_create_issue"
        operations: ["issueCreate"]
      - tool: "linear_search_issues"
        operations: ["issues", "issueSearch"]

  coverage-notes:
    type: array
    description: "Notes about API coverage limitations"
    example:
      - "Strong read coverage, limited write coverage"
      - "No blocking/blocked-by relationship support"

  evidence:
    $ref: "#/definitions/evidence"
    description: "Source and verification info for coverage claims"

# ============================================================================
# EVIDENCE DEFINITION (reusable provenance pattern)
# ============================================================================

definitions:
  evidence:
    description: "Source and verification info for data claims"
    type: object
    required: false
    properties:
      source-type:
        type: string
        enum:
          - source-code      # Verified by reading source code
          - documentation    # From official documentation
          - readme           # From repository README
          - github-api       # From GitHub API queries
          - manual-test      # Verified by running the tool
          - inferred         # Inferred from behavior/context
        description: "Type of source for this information"
      source-url:
        type: string
        description: "URL to source (repo, doc page, file permalink)"
        example: "https://github.com/schpet/linear-cli/blob/main/src/linear.ts"
      source-commit:
        type: string
        description: "Git commit hash when source was analyzed"
        example: "abc123def"
      source-file:
        type: string
        description: "File path within repository"
        example: "src/linear.ts"
      source-lines:
        type: string
        description: "Line range in source file"
        example: "45-67"
      retrieved-date:
        type: string
        format: "YYYY-MM-DD"
        description: "Date when information was retrieved/verified"
        example: "2026-01-04"
      confidence:
        type: string
        enum:
          - verified         # Directly verified from source code or testing
          - likely           # Strong evidence but not directly verified
          - inferred         # Inferred from behavior or indirect evidence
          - uncertain        # Best guess, needs verification
        description: "Confidence level in the data accuracy"
      notes:
        type: string
        description: "Additional context about source or verification"
        example: "Analyzed GraphQL query definitions in source"

# ============================================================================
# EXAMPLE COMPLETE ENTRY
# ============================================================================

_example:
  last-update: "2025-12-22"
  repo-url: "https://github.com/schpet/linear-cli"
  repo-commit: "abc123"

  name: "linear-cli"
  description: "Git-aware Linear CLI that keeps you in context"
  language: "TypeScript"
  languages: ["TypeScript", "Bash"]
  license: "MIT"

  stars: 500
  forks: 25
  contributors: 5
  last-commit: "2025-12-20"

  category: "git-workflow"
  secondary-categories: ["cli-client"]

  features:
    git-integration: true
    github-pr-creation: true
    branch-management: true
    issue-creation: true
    interactive-mode: true

  installation:
    brew: "schpet/tap/linear"
    deno: "jsr:@schpet/linear-cli"

  authentication:
    env-var: "LINEAR_API_KEY"
    setup-wizard: true

  platforms:
    linux: true
    macos: true
    windows: false

  commands:
    - "linear config"
    - "linear issue list"
    - "linear issue start"
    - "linear issue pr"

  api-coverage:
    queries-supported:
      - "issue"
      - "issues"
      - "team"
      - "teams"
      - "viewer"
    mutations-supported:
      - "issueCreate"
      - "issueUpdate"
      - "issueAddLabel"
      - "issueRemoveLabel"
    operations-partial:
      - operation: "issueCreate"
        limitation: "No estimate or dueDate parameter support"
    coverage-notes:
      - "Strong read coverage, limited write coverage"
      - "No blocking/blocked-by relationship support (GH #26)"
    evidence:
      source-type: source-code
      source-url: "https://github.com/schpet/linear-cli"
      retrieved-date: "2026-01-04"
      confidence: verified
      notes: "Analyzed GraphQL query definitions in source"
